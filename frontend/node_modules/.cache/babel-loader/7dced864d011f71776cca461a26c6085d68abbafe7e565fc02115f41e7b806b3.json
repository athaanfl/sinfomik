{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Han\\\\Desktop\\\\sinfomik\\\\backup5\\\\backup5\\\\frontend\\\\src\\\\features\\\\guru\\\\WaliKelasGradeView.js\",\n  _s = $RefreshSig$();\n// frontend/src/features/guru/WaliKelasGradeView.js\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';\nimport * as guruApi from '../../api/guru';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884d8', '#82ca9d', '#ffc658'];\nconst WaliKelasGradeView = ({\n  activeTASemester,\n  userId\n}) => {\n  _s();\n  const [gradesData, setGradesData] = useState(null); // Raw data from API\n  const [classInfo, setClassInfo] = useState(null); // Class info from API\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [processedData, setProcessedData] = useState({\n    gradesPerSubjectTable: new Map(),\n    // Map<nama_mapel, Array<studentGradeData>>\n    summaryTableData: [],\n    // Array<summaryStudentData>\n    uniqueTipeNilaiPerMapel: new Map(),\n    // Map<nama_mapel, Set<nama_tipe>>\n    gradesByStudentChart: [],\n    gradesBySubjectChart: [],\n    gradeDistributionChart: []\n  });\n  const [sortConfig, setSortConfig] = useState({\n    key: null,\n    direction: 'ascending'\n  });\n  const fetchWaliKelasGrades = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      if (!userId || !activeTASemester) {\n        setError(\"Informasi guru atau tahun ajaran aktif tidak tersedia.\");\n        setLoading(false);\n        return;\n      }\n      const response = await guruApi.getWaliKelasGrades(userId, activeTASemester.id_ta_semester);\n      setGradesData(response.grades);\n      setClassInfo(response.classInfo);\n      processGradeData(response.grades);\n    } catch (err) {\n      setError(err.message);\n      setGradesData([]);\n      setClassInfo(null);\n      setProcessedData({\n        gradesPerSubjectTable: new Map(),\n        summaryTableData: [],\n        uniqueTipeNilaiPerMapel: new Map(),\n        gradesByStudentChart: [],\n        gradesBySubjectChart: [],\n        gradeDistributionChart: []\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [activeTASemester, userId]);\n  useEffect(() => {\n    fetchWaliKelasGrades();\n  }, [fetchWaliKelasGrades]);\n  const processGradeData = grades => {\n    const gradesPerSubjectTable = new Map(); // { 'Matematika': [{id_siswa, nama_siswa, 'Tugas Harian': 80, 'UTS': 75, total_mapel, count_mapel}, ...]}\n    const summaryStudentMap = new Map(); // { id_siswa: { nama_siswa, overall_total, overall_count, 'Fisika_RataRata': 85, ... } }\n    const subjectChartMap = new Map(); // { nama_mapel: { total_nilai, count } }\n    // gradeDistributionCounts akan dihitung dari rata-rata akhir siswa, bukan nilai individual\n    const uniqueTipeNilaiPerMapel = new Map(); // { 'Matematika': Set('Tugas Harian', 'UTS'), ... }\n\n    // First pass: Populate detailed subject data and initial summary data\n    grades.forEach(grade => {\n      // Ensure grade.nama_mapel and grade.nama_tipe are not null/undefined\n      if (!grade.nama_mapel || !grade.nama_tipe) return;\n\n      // Initialize structures if not present\n      if (!gradesPerSubjectTable.has(grade.nama_mapel)) {\n        gradesPerSubjectTable.set(grade.nama_mapel, new Map()); // Inner map for students\n      }\n      const studentsInSubjectMap = gradesPerSubjectTable.get(grade.nama_mapel);\n      if (!studentsInSubjectMap.has(grade.id_siswa)) {\n        studentsInSubjectMap.set(grade.id_siswa, {\n          id_siswa: grade.id_siswa,\n          nama_siswa: grade.nama_siswa,\n          total_mapel_nilai: 0,\n          count_mapel_nilai: 0\n        });\n      }\n      const studentSubjectData = studentsInSubjectMap.get(grade.id_siswa);\n      studentSubjectData[grade.nama_tipe] = grade.nilai; // Assign grade by type\n      studentSubjectData.total_mapel_nilai += grade.nilai;\n      studentSubjectData.count_mapel_nilai++;\n\n      // Collect unique grade types per subject\n      if (!uniqueTipeNilaiPerMapel.has(grade.nama_mapel)) {\n        uniqueTipeNilaiPerMapel.set(grade.nama_mapel, new Set());\n      }\n      uniqueTipeNilaiPerMapel.get(grade.nama_mapel).add(grade.nama_tipe);\n\n      // Populate summaryStudentMap (for overall student averages and per-subject averages)\n      if (!summaryStudentMap.has(grade.id_siswa)) {\n        summaryStudentMap.set(grade.id_siswa, {\n          id_siswa: grade.id_siswa,\n          nama_siswa: grade.nama_siswa,\n          overall_total: 0,\n          overall_count: 0,\n          subject_totals: new Map() // { 'Fisika': { total: 0, count: 0 } }\n        });\n      }\n      const studentSummary = summaryStudentMap.get(grade.id_siswa);\n      studentSummary.overall_total += grade.nilai;\n      studentSummary.overall_count++;\n      if (!studentSummary.subject_totals.has(grade.nama_mapel)) {\n        studentSummary.subject_totals.set(grade.nama_mapel, {\n          total: 0,\n          count: 0\n        });\n      }\n      const subjectTotal = studentSummary.subject_totals.get(grade.nama_mapel);\n      subjectTotal.total += grade.nilai;\n      subjectTotal.count++;\n\n      // Populate subjectChartMap (for overall subject average chart)\n      if (!subjectChartMap.has(grade.nama_mapel)) {\n        subjectChartMap.set(grade.nama_mapel, {\n          total_nilai: 0,\n          count: 0\n        });\n      }\n      const subjectChart = subjectChartMap.get(grade.nama_mapel);\n      subjectChart.total_nilai += grade.nilai;\n      subjectChart.count++;\n    });\n\n    // Finalize gradesPerSubjectTable\n    const finalGradesPerSubjectTable = new Map();\n    gradesPerSubjectTable.forEach((studentsMap, nama_mapel) => {\n      const studentList = Array.from(studentsMap.values()).map(student => ({\n        ...student,\n        rata_rata_mapel: student.count_mapel_nilai > 0 ? parseFloat((student.total_mapel_nilai / student.count_mapel_nilai).toFixed(2)) : 0\n      })).sort((a, b) => a.nama_siswa.localeCompare(b.nama_siswa));\n      finalGradesPerSubjectTable.set(nama_mapel, studentList);\n    });\n\n    // Finalize summaryTableData\n    const summaryTableData = Array.from(summaryStudentMap.values()).map(student => {\n      const studentSummaryObj = {\n        id_siswa: student.id_siswa,\n        nama_siswa: student.nama_siswa,\n        overall_final_average: student.overall_count > 0 ? parseFloat((student.overall_total / student.overall_count).toFixed(2)) : 0\n      };\n      student.subject_totals.forEach((data, nama_mapel) => {\n        studentSummaryObj[`${nama_mapel}_RataRata`] = data.count > 0 ? parseFloat((data.total / data.count).toFixed(2)) : null;\n      });\n      return studentSummaryObj;\n    }).sort((a, b) => a.nama_siswa.localeCompare(b.nama_siswa));\n\n    // --- NEW LOGIC FOR GRADE DISTRIBUTION CHART (BASED ON STUDENT FINAL AVERAGE) ---\n    const gradeDistributionCounts = {\n      'A (90-100)': 0,\n      'B (80-89)': 0,\n      'C (70-79)': 0,\n      'D (60-69)': 0,\n      'E (<60)': 0\n    };\n    summaryTableData.forEach(student => {\n      const average = student.overall_final_average;\n      if (average >= 90) gradeDistributionCounts['A (90-100)']++;else if (average >= 80) gradeDistributionCounts['B (80-89)']++;else if (average >= 70) gradeDistributionCounts['C (70-79)']++;else if (average >= 60) gradeDistributionCounts['D (60-69)']++;else gradeDistributionCounts['E (<60)']++;\n    });\n    const totalStudentsForDistribution = Object.values(gradeDistributionCounts).reduce((sum, count) => sum + count, 0);\n    const gradeDistributionChart = Object.entries(gradeDistributionCounts).map(([range, count]) => ({\n      name: range,\n      value: count,\n      percentage: totalStudentsForDistribution > 0 ? parseFloat((count / totalStudentsForDistribution * 100).toFixed(2)) : 0\n    }));\n    // --- END NEW LOGIC ---\n\n    // Chart data (re-using existing logic)\n    const gradesByStudentChart = Array.from(summaryStudentMap.values()).map(student => ({\n      nama_siswa: student.nama_siswa,\n      rata_rata: student.overall_count > 0 ? parseFloat((student.overall_total / student.overall_count).toFixed(2)) : 0\n    })).sort((a, b) => a.nama_siswa.localeCompare(b.nama_siswa));\n    const gradesBySubjectChart = Array.from(subjectChartMap.entries()).map(([name, data]) => ({\n      nama_mapel: name,\n      rata_rata: data.count > 0 ? parseFloat((data.total_nilai / data.count).toFixed(2)) : 0\n    })).sort((a, b) => a.nama_mapel.localeCompare(b.nama_mapel));\n    setProcessedData({\n      gradesPerSubjectTable: finalGradesPerSubjectTable,\n      summaryTableData,\n      uniqueTipeNilaiPerMapel,\n      gradesByStudentChart,\n      gradesBySubjectChart,\n      gradeDistributionChart // Use the newly calculated distribution\n    });\n  };\n  const sortedSummaryData = useMemo(() => {\n    let sortableItems = [...processedData.summaryTableData];\n    if (sortConfig.key !== null) {\n      sortableItems.sort((a, b) => {\n        let aValue = a[sortConfig.key];\n        let bValue = b[sortConfig.key];\n        if (typeof aValue === 'string') {\n          return sortConfig.direction === 'ascending' ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);\n        } else {\n          // Numeric or null\n          aValue = aValue === null ? -Infinity : aValue; // Treat null as very small for sorting\n          bValue = bValue === null ? -Infinity : bValue;\n          if (aValue < bValue) {\n            return sortConfig.direction === 'ascending' ? -1 : 1;\n          }\n          if (aValue > bValue) {\n            return sortConfig.direction === 'ascending' ? 1 : -1;\n          }\n          return 0;\n        }\n      });\n    }\n    return sortableItems;\n  }, [processedData.summaryTableData, sortConfig]);\n  const requestSort = key => {\n    let direction = 'ascending';\n    if (sortConfig.key === key && sortConfig.direction === 'ascending') {\n      direction = 'descending';\n    } else if (sortConfig.key === key && sortConfig.direction === 'descending') {\n      direction = 'none'; // Add a 'none' state to remove sorting\n      key = null; // Reset key\n    }\n    setSortConfig({\n      key,\n      direction\n    });\n  };\n  const getSortIndicator = key => {\n    if (sortConfig.key === key) {\n      if (sortConfig.direction === 'ascending') return ' ▲';\n      if (sortConfig.direction === 'descending') return ' ▼';\n    }\n    return '';\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Memuat nilai kelas wali...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"message error\",\n    children: [\"Error: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 21\n  }, this);\n  if (!classInfo) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"message info\",\n    children: \"Anda bukan wali kelas untuk Tahun Ajaran & Semester aktif ini.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 26\n  }, this);\n  if (!gradesData || gradesData.length === 0) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"message info\",\n    children: [\"Belum ada nilai yang diinput untuk kelas \", classInfo.nama_kelas, \" di semester ini.\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 54\n  }, this);\n\n  // Get all unique subject names for summary table headers\n  const allSubjectNames = Array.from(processedData.gradesPerSubjectTable.keys()).sort();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"feature-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Nilai Kelas Wali: \", classInfo.nama_kelas]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message info\",\n      children: [\"Menampilkan semua nilai siswa di kelas \", classInfo.nama_kelas, \" untuk Tahun Ajaran & Semester \", activeTASemester.tahun_ajaran, \" \", activeTASemester.semester, \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this), Array.from(processedData.gradesPerSubjectTable.entries()).map(([nama_mapel, studentsGradeList]) => {\n      const uniqueTipeNilai = Array.from(processedData.uniqueTipeNilaiPerMapel.get(nama_mapel) || []).sort();\n      const dynamicColumnsCount = uniqueTipeNilai.length;\n      // Adjust column widths for per-subject tables\n      const perSubjectGridTemplateColumns = `minmax(150px, 1.5fr) repeat(${dynamicColumnsCount}, minmax(100px, 1fr)) minmax(120px, 0.8fr)`;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '40px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Detail Nilai \", nama_mapel]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grades-table-wrapper comprehensive-grades-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grades-grid-header comprehensive-grades-header\",\n            style: {\n              gridTemplateColumns: perSubjectGridTemplateColumns\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid-header-item\",\n              children: \"Nama Siswa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this), uniqueTipeNilai.map(tipe => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid-header-item grades-dynamic-header\",\n              children: tipe\n            }, tipe, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid-header-item\",\n              children: [\"Rata-rata \", nama_mapel]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this), studentsGradeList.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grades-grid-row comprehensive-grades-row\",\n            style: {\n              gridTemplateColumns: perSubjectGridTemplateColumns\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid-cell-item student-name\",\n              children: student.nama_siswa\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 19\n            }, this), uniqueTipeNilai.map(tipe => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid-cell-item\",\n              children: student[tipe] !== undefined ? student[tipe] : '-'\n            }, `${student.id_siswa}-${tipe}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 21\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid-cell-item grades-average\",\n              children: student.rata_rata_mapel\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 19\n            }, this)]\n          }, student.id_siswa, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this)]\n      }, nama_mapel, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginTop: '40px'\n      },\n      children: \"Ringkasan Nilai Siswa Keseluruhan\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grades-table-wrapper comprehensive-grades-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grades-grid-header comprehensive-grades-header\",\n        style: {\n          gridTemplateColumns: `minmax(180px, 1.5fr) repeat(${allSubjectNames.length}, minmax(120px, 1fr)) minmax(150px, 0.8fr)`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid-header-item sortable\",\n          onClick: () => requestSort('nama_siswa'),\n          children: [\"Nama Siswa \", getSortIndicator('nama_siswa')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), allSubjectNames.map(subject => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid-header-item grades-dynamic-header sortable\",\n          onClick: () => requestSort(`${subject}_RataRata`),\n          children: [subject, \" Rata-rata \", getSortIndicator(`${subject}_RataRata`)]\n        }, subject, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid-header-item sortable\",\n          onClick: () => requestSort('overall_final_average'),\n          children: [\"Rata-rata Akhir \", getSortIndicator('overall_final_average')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), sortedSummaryData.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grades-grid-row comprehensive-grades-row\",\n        style: {\n          gridTemplateColumns: `minmax(180px, 1.5fr) repeat(${allSubjectNames.length}, minmax(120px, 1fr)) minmax(150px, 0.8fr)`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid-cell-item student-name\",\n          children: student.nama_siswa\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this), allSubjectNames.map(subject => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid-cell-item\",\n          children: student[`${subject}_RataRata`] !== null ? student[`${subject}_RataRata`] : '-'\n        }, `${student.id_siswa}-${subject}_RataRata`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid-cell-item grades-average\",\n          children: student.overall_final_average\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this)]\n      }, student.id_siswa, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      style: {\n        marginTop: '40px'\n      },\n      children: \"Statistik Nilai\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"charts-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Rata-rata Nilai per Siswa (Keseluruhan)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n          width: \"100%\",\n          height: 300,\n          children: /*#__PURE__*/_jsxDEV(BarChart, {\n            data: processedData.gradesByStudentChart,\n            margin: {\n              top: 5,\n              right: 30,\n              left: 20,\n              bottom: 5\n            },\n            children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n              strokeDasharray: \"3 3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n              dataKey: \"nama_siswa\",\n              interval: 0,\n              angle: -30,\n              textAnchor: \"end\",\n              height: 60\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n              domain: [0, 100]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Bar, {\n              dataKey: \"rata_rata\",\n              fill: \"#0088FE\",\n              name: \"Rata-rata Nilai\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Rata-rata Nilai per Mata Pelajaran (Kelas)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n          width: \"100%\",\n          height: 300,\n          children: /*#__PURE__*/_jsxDEV(BarChart, {\n            data: processedData.gradesBySubjectChart,\n            margin: {\n              top: 5,\n              right: 30,\n              left: 20,\n              bottom: 5\n            },\n            children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n              strokeDasharray: \"3 3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n              dataKey: \"nama_mapel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n              domain: [0, 100]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Bar, {\n              dataKey: \"rata_rata\",\n              fill: \"#00C49F\",\n              name: \"Rata-rata Nilai\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Distribusi Nilai (Berdasarkan Rata-rata Akhir Siswa)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n          width: \"100%\",\n          height: 300,\n          children: /*#__PURE__*/_jsxDEV(PieChart, {\n            children: [/*#__PURE__*/_jsxDEV(Pie, {\n              data: processedData.gradeDistributionChart,\n              cx: \"50%\",\n              cy: \"50%\",\n              labelLine: false,\n              outerRadius: 100,\n              fill: \"#8884d8\",\n              dataKey: \"value\",\n              nameKey: \"name\",\n              label: ({\n                name,\n                percentage\n              }) => `${name} (${percentage.toFixed(0)}%)`,\n              children: processedData.gradeDistributionChart.map((entry, index) => /*#__PURE__*/_jsxDEV(Cell, {\n                fill: COLORS[index % COLORS.length]\n              }, `cell-${index}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              formatter: (value, name, props) => [`${value} siswa`, props.payload.name]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 5\n  }, this);\n};\n_s(WaliKelasGradeView, \"saeifeGgceGkkz+YWg1zxCl7S+g=\");\n_c = WaliKelasGradeView;\nexport default WaliKelasGradeView;\nvar _c;\n$RefreshReg$(_c, \"WaliKelasGradeView\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","PieChart","Pie","Cell","guruApi","jsxDEV","_jsxDEV","COLORS","WaliKelasGradeView","activeTASemester","userId","_s","gradesData","setGradesData","classInfo","setClassInfo","loading","setLoading","error","setError","processedData","setProcessedData","gradesPerSubjectTable","Map","summaryTableData","uniqueTipeNilaiPerMapel","gradesByStudentChart","gradesBySubjectChart","gradeDistributionChart","sortConfig","setSortConfig","key","direction","fetchWaliKelasGrades","response","getWaliKelasGrades","id_ta_semester","grades","processGradeData","err","message","summaryStudentMap","subjectChartMap","forEach","grade","nama_mapel","nama_tipe","has","set","studentsInSubjectMap","get","id_siswa","nama_siswa","total_mapel_nilai","count_mapel_nilai","studentSubjectData","nilai","Set","add","overall_total","overall_count","subject_totals","studentSummary","total","count","subjectTotal","total_nilai","subjectChart","finalGradesPerSubjectTable","studentsMap","studentList","Array","from","values","map","student","rata_rata_mapel","parseFloat","toFixed","sort","a","b","localeCompare","studentSummaryObj","overall_final_average","data","gradeDistributionCounts","average","totalStudentsForDistribution","Object","reduce","sum","entries","range","name","value","percentage","rata_rata","sortedSummaryData","sortableItems","aValue","bValue","Infinity","requestSort","getSortIndicator","children","fileName","_jsxFileName","lineNumber","columnNumber","className","length","nama_kelas","allSubjectNames","keys","tahun_ajaran","semester","studentsGradeList","uniqueTipeNilai","dynamicColumnsCount","perSubjectGridTemplateColumns","style","marginBottom","gridTemplateColumns","tipe","undefined","marginTop","onClick","subject","width","height","margin","top","right","left","bottom","strokeDasharray","dataKey","interval","angle","textAnchor","domain","fill","cx","cy","labelLine","outerRadius","nameKey","label","entry","index","formatter","props","payload","_c","$RefreshReg$"],"sources":["C:/Users/Han/Desktop/sinfomik/backup5/backup5/frontend/src/features/guru/WaliKelasGradeView.js"],"sourcesContent":["// frontend/src/features/guru/WaliKelasGradeView.js\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport {\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell,\n} from 'recharts';\nimport * as guruApi from '../../api/guru';\n\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884d8', '#82ca9d', '#ffc658'];\n\nconst WaliKelasGradeView = ({ activeTASemester, userId }) => {\n  const [gradesData, setGradesData] = useState(null); // Raw data from API\n  const [classInfo, setClassInfo] = useState(null); // Class info from API\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [processedData, setProcessedData] = useState({\n    gradesPerSubjectTable: new Map(), // Map<nama_mapel, Array<studentGradeData>>\n    summaryTableData: [],             // Array<summaryStudentData>\n    uniqueTipeNilaiPerMapel: new Map(), // Map<nama_mapel, Set<nama_tipe>>\n    gradesByStudentChart: [],\n    gradesBySubjectChart: [],\n    gradeDistributionChart: [],\n  });\n  const [sortConfig, setSortConfig] = useState({ key: null, direction: 'ascending' });\n\n  const fetchWaliKelasGrades = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      if (!userId || !activeTASemester) {\n        setError(\"Informasi guru atau tahun ajaran aktif tidak tersedia.\");\n        setLoading(false);\n        return;\n      }\n      const response = await guruApi.getWaliKelasGrades(userId, activeTASemester.id_ta_semester);\n      setGradesData(response.grades);\n      setClassInfo(response.classInfo);\n      processGradeData(response.grades);\n    } catch (err) {\n      setError(err.message);\n      setGradesData([]);\n      setClassInfo(null);\n      setProcessedData({\n        gradesPerSubjectTable: new Map(),\n        summaryTableData: [],\n        uniqueTipeNilaiPerMapel: new Map(),\n        gradesByStudentChart: [],\n        gradesBySubjectChart: [],\n        gradeDistributionChart: [],\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [activeTASemester, userId]);\n\n  useEffect(() => {\n    fetchWaliKelasGrades();\n  }, [fetchWaliKelasGrades]);\n\n  const processGradeData = (grades) => {\n    const gradesPerSubjectTable = new Map(); // { 'Matematika': [{id_siswa, nama_siswa, 'Tugas Harian': 80, 'UTS': 75, total_mapel, count_mapel}, ...]}\n    const summaryStudentMap = new Map(); // { id_siswa: { nama_siswa, overall_total, overall_count, 'Fisika_RataRata': 85, ... } }\n    const subjectChartMap = new Map(); // { nama_mapel: { total_nilai, count } }\n    // gradeDistributionCounts akan dihitung dari rata-rata akhir siswa, bukan nilai individual\n    const uniqueTipeNilaiPerMapel = new Map(); // { 'Matematika': Set('Tugas Harian', 'UTS'), ... }\n\n    // First pass: Populate detailed subject data and initial summary data\n    grades.forEach(grade => {\n      // Ensure grade.nama_mapel and grade.nama_tipe are not null/undefined\n      if (!grade.nama_mapel || !grade.nama_tipe) return;\n\n      // Initialize structures if not present\n      if (!gradesPerSubjectTable.has(grade.nama_mapel)) {\n        gradesPerSubjectTable.set(grade.nama_mapel, new Map()); // Inner map for students\n      }\n      const studentsInSubjectMap = gradesPerSubjectTable.get(grade.nama_mapel);\n\n      if (!studentsInSubjectMap.has(grade.id_siswa)) {\n        studentsInSubjectMap.set(grade.id_siswa, {\n          id_siswa: grade.id_siswa,\n          nama_siswa: grade.nama_siswa,\n          total_mapel_nilai: 0,\n          count_mapel_nilai: 0,\n        });\n      }\n      const studentSubjectData = studentsInSubjectMap.get(grade.id_siswa);\n      studentSubjectData[grade.nama_tipe] = grade.nilai; // Assign grade by type\n      studentSubjectData.total_mapel_nilai += grade.nilai;\n      studentSubjectData.count_mapel_nilai++;\n\n      // Collect unique grade types per subject\n      if (!uniqueTipeNilaiPerMapel.has(grade.nama_mapel)) {\n        uniqueTipeNilaiPerMapel.set(grade.nama_mapel, new Set());\n      }\n      uniqueTipeNilaiPerMapel.get(grade.nama_mapel).add(grade.nama_tipe);\n\n      // Populate summaryStudentMap (for overall student averages and per-subject averages)\n      if (!summaryStudentMap.has(grade.id_siswa)) {\n        summaryStudentMap.set(grade.id_siswa, {\n          id_siswa: grade.id_siswa,\n          nama_siswa: grade.nama_siswa,\n          overall_total: 0,\n          overall_count: 0,\n          subject_totals: new Map(), // { 'Fisika': { total: 0, count: 0 } }\n        });\n      }\n      const studentSummary = summaryStudentMap.get(grade.id_siswa);\n      studentSummary.overall_total += grade.nilai;\n      studentSummary.overall_count++;\n\n      if (!studentSummary.subject_totals.has(grade.nama_mapel)) {\n        studentSummary.subject_totals.set(grade.nama_mapel, { total: 0, count: 0 });\n      }\n      const subjectTotal = studentSummary.subject_totals.get(grade.nama_mapel);\n      subjectTotal.total += grade.nilai;\n      subjectTotal.count++;\n\n      // Populate subjectChartMap (for overall subject average chart)\n      if (!subjectChartMap.has(grade.nama_mapel)) {\n        subjectChartMap.set(grade.nama_mapel, { total_nilai: 0, count: 0 });\n      }\n      const subjectChart = subjectChartMap.get(grade.nama_mapel);\n      subjectChart.total_nilai += grade.nilai;\n      subjectChart.count++;\n    });\n\n    // Finalize gradesPerSubjectTable\n    const finalGradesPerSubjectTable = new Map();\n    gradesPerSubjectTable.forEach((studentsMap, nama_mapel) => {\n      const studentList = Array.from(studentsMap.values()).map(student => ({\n        ...student,\n        rata_rata_mapel: student.count_mapel_nilai > 0 ? parseFloat((student.total_mapel_nilai / student.count_mapel_nilai).toFixed(2)) : 0,\n      })).sort((a, b) => a.nama_siswa.localeCompare(b.nama_siswa));\n      finalGradesPerSubjectTable.set(nama_mapel, studentList);\n    });\n\n    // Finalize summaryTableData\n    const summaryTableData = Array.from(summaryStudentMap.values()).map(student => {\n      const studentSummaryObj = {\n        id_siswa: student.id_siswa,\n        nama_siswa: student.nama_siswa,\n        overall_final_average: student.overall_count > 0 ? parseFloat((student.overall_total / student.overall_count).toFixed(2)) : 0,\n      };\n      student.subject_totals.forEach((data, nama_mapel) => {\n        studentSummaryObj[`${nama_mapel}_RataRata`] = data.count > 0 ? parseFloat((data.total / data.count).toFixed(2)) : null;\n      });\n      return studentSummaryObj;\n    }).sort((a, b) => a.nama_siswa.localeCompare(b.nama_siswa));\n\n    // --- NEW LOGIC FOR GRADE DISTRIBUTION CHART (BASED ON STUDENT FINAL AVERAGE) ---\n    const gradeDistributionCounts = { 'A (90-100)': 0, 'B (80-89)': 0, 'C (70-79)': 0, 'D (60-69)': 0, 'E (<60)': 0 };\n    summaryTableData.forEach(student => {\n      const average = student.overall_final_average;\n      if (average >= 90) gradeDistributionCounts['A (90-100)']++;\n      else if (average >= 80) gradeDistributionCounts['B (80-89)']++;\n      else if (average >= 70) gradeDistributionCounts['C (70-79)']++;\n      else if (average >= 60) gradeDistributionCounts['D (60-69)']++;\n      else gradeDistributionCounts['E (<60)']++;\n    });\n    const totalStudentsForDistribution = Object.values(gradeDistributionCounts).reduce((sum, count) => sum + count, 0);\n    const gradeDistributionChart = Object.entries(gradeDistributionCounts).map(([range, count]) => ({\n      name: range,\n      value: count,\n      percentage: totalStudentsForDistribution > 0 ? parseFloat(((count / totalStudentsForDistribution) * 100).toFixed(2)) : 0,\n    }));\n    // --- END NEW LOGIC ---\n\n    // Chart data (re-using existing logic)\n    const gradesByStudentChart = Array.from(summaryStudentMap.values()).map(student => ({\n      nama_siswa: student.nama_siswa,\n      rata_rata: student.overall_count > 0 ? parseFloat((student.overall_total / student.overall_count).toFixed(2)) : 0,\n    })).sort((a, b) => a.nama_siswa.localeCompare(b.nama_siswa));\n\n    const gradesBySubjectChart = Array.from(subjectChartMap.entries()).map(([name, data]) => ({\n      nama_mapel: name,\n      rata_rata: data.count > 0 ? parseFloat((data.total_nilai / data.count).toFixed(2)) : 0,\n    })).sort((a, b) => a.nama_mapel.localeCompare(b.nama_mapel));\n\n    setProcessedData({\n      gradesPerSubjectTable: finalGradesPerSubjectTable,\n      summaryTableData,\n      uniqueTipeNilaiPerMapel,\n      gradesByStudentChart,\n      gradesBySubjectChart,\n      gradeDistributionChart, // Use the newly calculated distribution\n    });\n  };\n\n  const sortedSummaryData = useMemo(() => {\n    let sortableItems = [...processedData.summaryTableData];\n    if (sortConfig.key !== null) {\n      sortableItems.sort((a, b) => {\n        let aValue = a[sortConfig.key];\n        let bValue = b[sortConfig.key];\n\n        if (typeof aValue === 'string') {\n          return sortConfig.direction === 'ascending' ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);\n        } else { // Numeric or null\n          aValue = aValue === null ? -Infinity : aValue; // Treat null as very small for sorting\n          bValue = bValue === null ? -Infinity : bValue;\n\n          if (aValue < bValue) {\n            return sortConfig.direction === 'ascending' ? -1 : 1;\n          }\n          if (aValue > bValue) {\n            return sortConfig.direction === 'ascending' ? 1 : -1;\n          }\n          return 0;\n        }\n      });\n    }\n    return sortableItems;\n  }, [processedData.summaryTableData, sortConfig]);\n\n  const requestSort = (key) => {\n    let direction = 'ascending';\n    if (sortConfig.key === key && sortConfig.direction === 'ascending') {\n      direction = 'descending';\n    } else if (sortConfig.key === key && sortConfig.direction === 'descending') {\n        direction = 'none'; // Add a 'none' state to remove sorting\n        key = null; // Reset key\n    }\n    setSortConfig({ key, direction });\n  };\n\n  const getSortIndicator = (key) => {\n    if (sortConfig.key === key) {\n      if (sortConfig.direction === 'ascending') return ' ▲';\n      if (sortConfig.direction === 'descending') return ' ▼';\n    }\n    return '';\n  };\n\n  if (loading) return <p>Memuat nilai kelas wali...</p>;\n  if (error) return <p className=\"message error\">Error: {error}</p>;\n  if (!classInfo) return <p className=\"message info\">Anda bukan wali kelas untuk Tahun Ajaran & Semester aktif ini.</p>;\n  if (!gradesData || gradesData.length === 0) return <p className=\"message info\">Belum ada nilai yang diinput untuk kelas {classInfo.nama_kelas} di semester ini.</p>;\n\n  // Get all unique subject names for summary table headers\n  const allSubjectNames = Array.from(processedData.gradesPerSubjectTable.keys()).sort();\n\n  return (\n    <div className=\"feature-content\">\n      <h2>Nilai Kelas Wali: {classInfo.nama_kelas}</h2>\n      <p className=\"message info\">Menampilkan semua nilai siswa di kelas {classInfo.nama_kelas} untuk Tahun Ajaran & Semester {activeTASemester.tahun_ajaran} {activeTASemester.semester}.</p>\n\n      {/* Bagian Tabel Nilai per Mata Pelajaran */}\n      {Array.from(processedData.gradesPerSubjectTable.entries()).map(([nama_mapel, studentsGradeList]) => {\n        const uniqueTipeNilai = Array.from(processedData.uniqueTipeNilaiPerMapel.get(nama_mapel) || []).sort();\n        const dynamicColumnsCount = uniqueTipeNilai.length;\n        // Adjust column widths for per-subject tables\n        const perSubjectGridTemplateColumns = `minmax(150px, 1.5fr) repeat(${dynamicColumnsCount}, minmax(100px, 1fr)) minmax(120px, 0.8fr)`;\n\n        return (\n          <div key={nama_mapel} style={{ marginBottom: '40px' }}>\n            <h4>Detail Nilai {nama_mapel}</h4>\n            <div className=\"grades-table-wrapper comprehensive-grades-table\">\n              <div className=\"grades-grid-header comprehensive-grades-header\" style={{ gridTemplateColumns: perSubjectGridTemplateColumns }}>\n                <div className=\"grid-header-item\">Nama Siswa</div>\n                {uniqueTipeNilai.map(tipe => (\n                  <div key={tipe} className=\"grid-header-item grades-dynamic-header\">{tipe}</div>\n                ))}\n                <div className=\"grid-header-item\">Rata-rata {nama_mapel}</div>\n              </div>\n              {studentsGradeList.map(student => (\n                <div key={student.id_siswa} className=\"grades-grid-row comprehensive-grades-row\" style={{ gridTemplateColumns: perSubjectGridTemplateColumns }}>\n                  <div className=\"grid-cell-item student-name\">{student.nama_siswa}</div>\n                  {uniqueTipeNilai.map(tipe => (\n                    <div key={`${student.id_siswa}-${tipe}`} className=\"grid-cell-item\">\n                      {student[tipe] !== undefined ? student[tipe] : '-'}\n                    </div>\n                  ))}\n                  <div className=\"grid-cell-item grades-average\">{student.rata_rata_mapel}</div>\n                </div>\n              ))}\n            </div>\n          </div>\n        );\n      })}\n\n      {/* Bagian Tabel Ringkasan Akhir */}\n      <h3 style={{ marginTop: '40px' }}>Ringkasan Nilai Siswa Keseluruhan</h3>\n      <div className=\"grades-table-wrapper comprehensive-grades-table\">\n        <div className=\"grades-grid-header comprehensive-grades-header\"\n             style={{ gridTemplateColumns: `minmax(180px, 1.5fr) repeat(${allSubjectNames.length}, minmax(120px, 1fr)) minmax(150px, 0.8fr)` }}>\n          <div className=\"grid-header-item sortable\" onClick={() => requestSort('nama_siswa')}>\n            Nama Siswa {getSortIndicator('nama_siswa')}\n          </div>\n          {allSubjectNames.map(subject => (\n            <div key={subject} className=\"grid-header-item grades-dynamic-header sortable\" onClick={() => requestSort(`${subject}_RataRata`)}>\n              {subject} Rata-rata {getSortIndicator(`${subject}_RataRata`)}\n            </div>\n          ))}\n          <div className=\"grid-header-item sortable\" onClick={() => requestSort('overall_final_average')}>\n            Rata-rata Akhir {getSortIndicator('overall_final_average')}\n          </div>\n        </div>\n        {sortedSummaryData.map(student => (\n          <div key={student.id_siswa} className=\"grades-grid-row comprehensive-grades-row\"\n               style={{ gridTemplateColumns: `minmax(180px, 1.5fr) repeat(${allSubjectNames.length}, minmax(120px, 1fr)) minmax(150px, 0.8fr)` }}>\n            <div className=\"grid-cell-item student-name\">{student.nama_siswa}</div>\n            {allSubjectNames.map(subject => (\n              <div key={`${student.id_siswa}-${subject}_RataRata`} className=\"grid-cell-item\">\n                {student[`${subject}_RataRata`] !== null ? student[`${subject}_RataRata`] : '-'}\n              </div>\n            ))}\n            <div className=\"grid-cell-item grades-average\">{student.overall_final_average}</div>\n          </div>\n        ))}\n      </div>\n\n\n      {/* Bagian Grafik */}\n      <h4 style={{ marginTop: '40px' }}>Statistik Nilai</h4>\n      <div className=\"charts-container\">\n        <div className=\"chart-card\">\n          <h5>Rata-rata Nilai per Siswa (Keseluruhan)</h5>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <BarChart data={processedData.gradesByStudentChart} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"nama_siswa\" interval={0} angle={-30} textAnchor=\"end\" height={60} />\n              <YAxis domain={[0, 100]} />\n              <Tooltip />\n              <Legend />\n              <Bar dataKey=\"rata_rata\" fill=\"#0088FE\" name=\"Rata-rata Nilai\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </div>\n\n        <div className=\"chart-card\">\n          <h5>Rata-rata Nilai per Mata Pelajaran (Kelas)</h5>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <BarChart data={processedData.gradesBySubjectChart} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"nama_mapel\" />\n              <YAxis domain={[0, 100]} />\n              <Tooltip />\n              <Legend />\n              <Bar dataKey=\"rata_rata\" fill=\"#00C49F\" name=\"Rata-rata Nilai\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </div>\n\n        <div className=\"chart-card\">\n          <h5>Distribusi Nilai (Berdasarkan Rata-rata Akhir Siswa)</h5>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <PieChart>\n              <Pie\n                data={processedData.gradeDistributionChart}\n                cx=\"50%\"\n                cy=\"50%\"\n                labelLine={false}\n                outerRadius={100}\n                fill=\"#8884d8\"\n                dataKey=\"value\"\n                nameKey=\"name\"\n                label={({ name, percentage }) => `${name} (${percentage.toFixed(0)}%)`}\n              >\n                {processedData.gradeDistributionChart.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                ))}\n              </Pie>\n              {/* Perbaikan di sini: Mengubah label tooltip menjadi \"siswa\" */}\n              <Tooltip formatter={(value, name, props) => [`${value} siswa`, props.payload.name]} />\n              <Legend />\n            </PieChart>\n          </ResponsiveContainer>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WaliKelasGradeView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}