{"ast":null,"code":"// frontend/src/App.js\nimport React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import LoginPage from'./pages/LoginPage';import DashboardPage from'./pages/DashboardPage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// State untuk melacak status login pengguna\nconst[isLoggedIn,setIsLoggedIn]=useState(false);const[userRole,setUserRole]=useState(null);// 'admin', 'guru', 'siswa'\nconst[username,setUsername]=useState(null);// Nama pengguna yang login\nconst[userId,setUserId]=useState(null);// ID pengguna yang login\n// Efek untuk memeriksa status login dari localStorage (jika ada)\nuseEffect(()=>{const storedLoggedIn=localStorage.getItem('isLoggedIn')==='true';const storedUserRole=localStorage.getItem('userRole');const storedUsername=localStorage.getItem('username');const storedUserId=localStorage.getItem('userId');// Ambil userId dari localStorage\nif(storedLoggedIn&&storedUserRole&&storedUsername&&storedUserId){setIsLoggedIn(storedLoggedIn);setUserRole(storedUserRole);setUsername(storedUsername);setUserId(storedUserId);// Set userId\n}},[]);// Fungsi untuk menangani login\n// Tambahkan parameter 'id' untuk userId\nconst handleLogin=(role,name,id)=>{setIsLoggedIn(true);setUserRole(role);setUsername(name);setUserId(id);// Set userId di state\n// Simpan status login di localStorage\nlocalStorage.setItem('isLoggedIn','true');localStorage.setItem('userRole',role);localStorage.setItem('username',name);localStorage.setItem('userId',id);// Simpan userId di localStorage\n};// Fungsi untuk menangani logout\nconst handleLogout=()=>{setIsLoggedIn(false);setUserRole(null);setUsername(null);setUserId(null);// Hapus status login dari localStorage\nlocalStorage.removeItem('isLoggedIn');localStorage.removeItem('userRole');localStorage.removeItem('username');localStorage.removeItem('userId');// Hapus userId dari localStorage\n};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:isLoggedIn?/*#__PURE__*/// Jika sudah login, redirect ke dashboard yang sesuai\n_jsx(Navigate,{to:\"/\".concat(userRole,\"-dashboard\"),replace:true}):/*#__PURE__*/// Jika belum login, tampilkan halaman login\n_jsx(LoginPage,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/admin-dashboard\",element:isLoggedIn&&userRole==='admin'?/*#__PURE__*/_jsx(DashboardPage,{userRole:userRole,username:username,userId:userId,onLogout:handleLogout}):/*#__PURE__*/// Jika tidak login atau bukan admin, redirect ke login\n_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/guru-dashboard\",element:isLoggedIn&&userRole==='guru'?/*#__PURE__*/_jsx(DashboardPage,{userRole:userRole,username:username,userId:userId,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/siswa-dashboard\",element:isLoggedIn&&userRole==='siswa'?/*#__PURE__*/_jsx(DashboardPage,{userRole:userRole,username:username,userId:userId,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","LoginPage","DashboardPage","jsx","_jsx","jsxs","_jsxs","App","isLoggedIn","setIsLoggedIn","userRole","setUserRole","username","setUsername","userId","setUserId","storedLoggedIn","localStorage","getItem","storedUserRole","storedUsername","storedUserId","handleLogin","role","name","id","setItem","handleLogout","removeItem","children","path","element","to","concat","replace","onLogin","onLogout"],"sources":["C:/Users/Han/Desktop/sinfomik/backup5/backup5/frontend/src/App.js"],"sourcesContent":["    // frontend/src/App.js\n    import React, { useState, useEffect } from 'react';\n    import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\n    import LoginPage from './pages/LoginPage';\n    import DashboardPage from './pages/DashboardPage';\n\n    function App() {\n      // State untuk melacak status login pengguna\n      const [isLoggedIn, setIsLoggedIn] = useState(false);\n      const [userRole, setUserRole] = useState(null); // 'admin', 'guru', 'siswa'\n      const [username, setUsername] = useState(null); // Nama pengguna yang login\n      const [userId, setUserId] = useState(null); // ID pengguna yang login\n\n      // Efek untuk memeriksa status login dari localStorage (jika ada)\n      useEffect(() => {\n        const storedLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n        const storedUserRole = localStorage.getItem('userRole');\n        const storedUsername = localStorage.getItem('username');\n        const storedUserId = localStorage.getItem('userId'); // Ambil userId dari localStorage\n\n        if (storedLoggedIn && storedUserRole && storedUsername && storedUserId) {\n          setIsLoggedIn(storedLoggedIn);\n          setUserRole(storedUserRole);\n          setUsername(storedUsername);\n          setUserId(storedUserId); // Set userId\n        }\n      }, []);\n\n      // Fungsi untuk menangani login\n      // Tambahkan parameter 'id' untuk userId\n      const handleLogin = (role, name, id) => {\n        setIsLoggedIn(true);\n        setUserRole(role);\n        setUsername(name);\n        setUserId(id); // Set userId di state\n        // Simpan status login di localStorage\n        localStorage.setItem('isLoggedIn', 'true');\n        localStorage.setItem('userRole', role);\n        localStorage.setItem('username', name);\n        localStorage.setItem('userId', id); // Simpan userId di localStorage\n      };\n\n      // Fungsi untuk menangani logout\n      const handleLogout = () => {\n        setIsLoggedIn(false);\n        setUserRole(null);\n        setUsername(null);\n        setUserId(null);\n        // Hapus status login dari localStorage\n        localStorage.removeItem('isLoggedIn');\n        localStorage.removeItem('userRole');\n        localStorage.removeItem('username');\n        localStorage.removeItem('userId'); // Hapus userId dari localStorage\n      };\n\n      return (\n        <Router>\n          <Routes>\n            {/* Route untuk halaman login */}\n            <Route path=\"/login\" element={\n              isLoggedIn ? (\n                // Jika sudah login, redirect ke dashboard yang sesuai\n                <Navigate to={`/${userRole}-dashboard`} replace />\n              ) : (\n                // Jika belum login, tampilkan halaman login\n                <LoginPage onLogin={handleLogin} />\n              )\n            } />\n\n            {/* Route untuk dashboard Admin */}\n            <Route path=\"/admin-dashboard\" element={\n              isLoggedIn && userRole === 'admin' ? (\n                <DashboardPage userRole={userRole} username={username} userId={userId} onLogout={handleLogout} />\n              ) : (\n                // Jika tidak login atau bukan admin, redirect ke login\n                <Navigate to=\"/login\" replace />\n              )\n            } />\n\n            {/* Route untuk dashboard Guru */}\n            <Route path=\"/guru-dashboard\" element={\n              isLoggedIn && userRole === 'guru' ? (\n                <DashboardPage userRole={userRole} username={username} userId={userId} onLogout={handleLogout} />\n              ) : (\n                <Navigate to=\"/login\" replace />\n              )\n            } />\n\n            {/* Route untuk dashboard Siswa */}\n            <Route path=\"/siswa-dashboard\" element={\n              isLoggedIn && userRole === 'siswa' ? (\n                <DashboardPage userRole={userRole} username={username} userId={userId} onLogout={handleLogout} />\n              ) : (\n                <Navigate to=\"/login\" replace />\n              )\n            } />\n\n            {/* Default route: redirect ke login jika tidak ada path yang cocok */}\n            <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n          </Routes>\n        </Router>\n      );\n    }\n\n    export default App;\n    "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}