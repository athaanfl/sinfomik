{"ast":null,"code":"// Import ini harus di bagian paling atas file\nimport{getTipeNilai,getMataPelajaran}from'./admin';// getMataPelajaran juga dibutuhkan\nexport{getTipeNilai,getMataPelajaran};// Ekspor ulang agar bisa digunakan oleh modul lain\n// frontend/src/api/guru.js\nconst API_BASE_URL=process.env.REACT_APP_API_BASE_URL||'http://localhost:5000';// --- Fungsi Umum untuk Panggilan API ---\nconst fetchData=async function(url){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{const response=await fetch(url,options);const data=await response.json();if(!response.ok){throw new Error(data.message||'Terjadi kesalahan pada server.');}return data;}catch(error){console.error(\"Error fetching from \".concat(url,\":\"),error);throw error;}};// --- API untuk Penugasan Guru (Kelas & Mapel yang Diajar) ---\nexport const getGuruAssignments=async(id_guru,id_ta_semester)=>{if(!id_guru||!id_ta_semester){throw new Error(\"ID Guru dan ID TA/Semester diperlukan untuk mengambil penugasan.\");}return fetchData(\"\".concat(API_BASE_URL,\"/api/guru/assignments/\").concat(id_guru,\"/\").concat(id_ta_semester));};// --- API untuk Siswa di Kelas Tertentu ---\nexport const getStudentsInClass=async(id_kelas,id_ta_semester)=>{if(!id_kelas||!id_ta_semester){throw new Error(\"ID Kelas dan ID TA/Semester diperlukan untuk mengambil siswa.\");}return fetchData(\"\".concat(API_BASE_URL,\"/api/guru/students-in-class/\").concat(id_kelas,\"/\").concat(id_ta_semester));};// --- API untuk Menambah/Memperbarui Nilai (Original) ---\nexport const addOrUpdateGrade=async gradeData=>{return fetchData(\"\".concat(API_BASE_URL,\"/api/guru/grades\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(gradeData)});};// --- API untuk Menambah/Memperbarui Nilai (New TP/UAS Structure) ---\nexport const addOrUpdateNewGrade=async gradeData=>{return fetchData(\"\".concat(API_BASE_URL,\"/api/guru/grades-new\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(gradeData)});};// --- API untuk Mendapatkan Nilai berdasarkan Assignment ---\nexport const getGradesByAssignment=async(id_guru,id_mapel,id_kelas,id_ta_semester)=>{if(!id_guru||!id_mapel||!id_kelas||!id_ta_semester){throw new Error(\"Semua ID diperlukan untuk mengambil nilai berdasarkan assignment.\");}return fetchData(\"\".concat(API_BASE_URL,\"/api/guru/grades/assignment/\").concat(id_guru,\"/\").concat(id_mapel,\"/\").concat(id_kelas,\"/\").concat(id_ta_semester));};// --- API untuk Rekap Nilai ---\nexport const getRekapNilai=async(id_guru,id_mapel,id_kelas,id_ta_semester)=>{if(!id_guru||!id_mapel||!id_kelas||!id_ta_semester){throw new Error(\"Semua ID diperlukan untuk mengambil rekap nilai.\");}return fetchData(\"\".concat(API_BASE_URL,\"/api/guru/grades/rekap/\").concat(id_guru,\"/\").concat(id_mapel,\"/\").concat(id_kelas,\"/\").concat(id_ta_semester));};// --- API Capaian Pembelajaran untuk Guru ---\nexport const getCapaianPembelajaranByMapel=async id_mapel=>{if(!id_mapel){throw new Error(\"ID Mata Pelajaran diperlukan untuk mengambil Capaian Pembelajaran.\");}return fetchData(\"\".concat(API_BASE_URL,\"/api/guru/cp/mapel/\").concat(id_mapel));};export const getSiswaCapaianPembelajaran=async(id_guru,id_mapel,id_kelas,id_ta_semester)=>{if(!id_guru||!id_mapel||!id_kelas||!id_ta_semester){throw new Error(\"Semua ID diperlukan untuk mengambil Siswa Capaian Pembelajaran.\");}return fetchData(\"\".concat(API_BASE_URL,\"/api/guru/siswa-cp/\").concat(id_guru,\"/\").concat(id_mapel,\"/\").concat(id_kelas,\"/\").concat(id_ta_semester));};export const addOrUpdateSiswaCapaianPembelajaran=async siswaCpData=>{return fetchData(\"\".concat(API_BASE_URL,\"/api/guru/siswa-cp\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(siswaCpData)});};// --- New: Get Wali Kelas Grades ---\nexport const getWaliKelasGrades=async(id_guru,id_ta_semester)=>{if(!id_guru||!id_ta_semester){throw new Error(\"ID Guru dan ID TA/Semester diperlukan untuk mengambil nilai kelas wali.\");}return fetchData(\"\".concat(API_BASE_URL,\"/api/guru/wali-kelas-grades/\").concat(id_guru,\"/\").concat(id_ta_semester));};","map":{"version":3,"names":["getTipeNilai","getMataPelajaran","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","fetchData","url","options","arguments","length","undefined","response","fetch","data","json","ok","Error","message","error","console","concat","getGuruAssignments","id_guru","id_ta_semester","getStudentsInClass","id_kelas","addOrUpdateGrade","gradeData","method","headers","body","JSON","stringify","addOrUpdateNewGrade","getGradesByAssignment","id_mapel","getRekapNilai","getCapaianPembelajaranByMapel","getSiswaCapaianPembelajaran","addOrUpdateSiswaCapaianPembelajaran","siswaCpData","getWaliKelasGrades"],"sources":["C:/Users/Han/Desktop/sinfomik/backup5/backup5/frontend/src/api/guru.js"],"sourcesContent":["// Import ini harus di bagian paling atas file\nimport { getTipeNilai, getMataPelajaran } from './admin'; // getMataPelajaran juga dibutuhkan\nexport { getTipeNilai, getMataPelajaran }; // Ekspor ulang agar bisa digunakan oleh modul lain\n\n// frontend/src/api/guru.js\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000';\n\n// --- Fungsi Umum untuk Panggilan API ---\nconst fetchData = async (url, options = {}) => {\n  try {\n    const response = await fetch(url, options);\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.message || 'Terjadi kesalahan pada server.');\n    }\n    return data;\n  } catch (error) {\n    console.error(`Error fetching from ${url}:`, error);\n    throw error;\n  }\n};\n\n// --- API untuk Penugasan Guru (Kelas & Mapel yang Diajar) ---\nexport const getGuruAssignments = async (id_guru, id_ta_semester) => {\n  if (!id_guru || !id_ta_semester) {\n    throw new Error(\"ID Guru dan ID TA/Semester diperlukan untuk mengambil penugasan.\");\n  }\n  return fetchData(`${API_BASE_URL}/api/guru/assignments/${id_guru}/${id_ta_semester}`);\n};\n\n// --- API untuk Siswa di Kelas Tertentu ---\nexport const getStudentsInClass = async (id_kelas, id_ta_semester) => {\n  if (!id_kelas || !id_ta_semester) {\n    throw new Error(\"ID Kelas dan ID TA/Semester diperlukan untuk mengambil siswa.\");\n  }\n  return fetchData(`${API_BASE_URL}/api/guru/students-in-class/${id_kelas}/${id_ta_semester}`);\n};\n\n// --- API untuk Menambah/Memperbarui Nilai (Original) ---\nexport const addOrUpdateGrade = async (gradeData) => {\n  return fetchData(`${API_BASE_URL}/api/guru/grades`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(gradeData),\n  });\n};\n\n// --- API untuk Menambah/Memperbarui Nilai (New TP/UAS Structure) ---\nexport const addOrUpdateNewGrade = async (gradeData) => {\n  return fetchData(`${API_BASE_URL}/api/guru/grades-new`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(gradeData),\n  });\n};\n\n// --- API untuk Mendapatkan Nilai berdasarkan Assignment ---\nexport const getGradesByAssignment = async (id_guru, id_mapel, id_kelas, id_ta_semester) => {\n  if (!id_guru || !id_mapel || !id_kelas || !id_ta_semester) {\n    throw new Error(\"Semua ID diperlukan untuk mengambil nilai berdasarkan assignment.\");\n  }\n  return fetchData(`${API_BASE_URL}/api/guru/grades/assignment/${id_guru}/${id_mapel}/${id_kelas}/${id_ta_semester}`);\n};\n\n// --- API untuk Rekap Nilai ---\nexport const getRekapNilai = async (id_guru, id_mapel, id_kelas, id_ta_semester) => {\n  if (!id_guru || !id_mapel || !id_kelas || !id_ta_semester) {\n    throw new Error(\"Semua ID diperlukan untuk mengambil rekap nilai.\");\n  }\n  return fetchData(`${API_BASE_URL}/api/guru/grades/rekap/${id_guru}/${id_mapel}/${id_kelas}/${id_ta_semester}`);\n};\n\n// --- API Capaian Pembelajaran untuk Guru ---\nexport const getCapaianPembelajaranByMapel = async (id_mapel) => {\n  if (!id_mapel) {\n    throw new Error(\"ID Mata Pelajaran diperlukan untuk mengambil Capaian Pembelajaran.\");\n  }\n  return fetchData(`${API_BASE_URL}/api/guru/cp/mapel/${id_mapel}`);\n};\n\nexport const getSiswaCapaianPembelajaran = async (id_guru, id_mapel, id_kelas, id_ta_semester) => {\n  if (!id_guru || !id_mapel || !id_kelas || !id_ta_semester) {\n    throw new Error(\"Semua ID diperlukan untuk mengambil Siswa Capaian Pembelajaran.\");\n  }\n  return fetchData(`${API_BASE_URL}/api/guru/siswa-cp/${id_guru}/${id_mapel}/${id_kelas}/${id_ta_semester}`);\n};\n\nexport const addOrUpdateSiswaCapaianPembelajaran = async (siswaCpData) => {\n  return fetchData(`${API_BASE_URL}/api/guru/siswa-cp`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(siswaCpData),\n  });\n};\n\n// --- New: Get Wali Kelas Grades ---\nexport const getWaliKelasGrades = async (id_guru, id_ta_semester) => {\n  if (!id_guru || !id_ta_semester) {\n    throw new Error(\"ID Guru dan ID TA/Semester diperlukan untuk mengambil nilai kelas wali.\");\n  }\n  return fetchData(`${API_BASE_URL}/api/guru/wali-kelas-grades/${id_guru}/${id_ta_semester}`);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}